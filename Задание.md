## 1) Выбери “проект” и стек для пайплайна

Тебе надо определить, что именно проверяет CI. Варианты:

* **Python**: `pytest + flake8/ruff + mypy + bandit + trufflehog`
* 
---

## 2) Спроектируй пайплайн (pipeline_design.md)

Сделай документ с таблицей этапов:

**Что писать:**

1. Статический анализ (линтер/форматтер/типизация)
2. Unit-тесты (порог покрытия, например 80%)
3. Интеграционные тесты (через Docker/Testcontainers, можно как “опциональный” этап)
4. Security (secret scan + vuln scan)

**В каждом этапе:**

* цель
* инструменты
* правила провала (что именно валит job)

**Обязательно добавь раздел “Стратегия быстрой обратной связи”:**

* как держать ключевые проверки < 2 минут (например: линтер + unit)
* кэш зависимостей (pip/npm cache)
* параллелизм (несколько job одновременно)
* разделение на “быстрые required” и “длинные nightly/по main”

---

## 3) Опиши правила командной работы (workflow_rules.md)

Тут ты описываешь “как работаем” и что именно enforced техникой.

**Минимальный набор:**

1. main защищён (no direct push)
2. PR обязателен
3. минимум 1 approval
4. required status checks (без зелёного CI — нельзя)
5. стратегия мержа: rebase (или squash — но в задании rebase)
6. CODEOWNERS (кто ревьюит какие части)

**Добавь “Blameless Culture”:**

* шаблон post-mortem (коротко: что произошло, impact, timeline, root cause, action items)
* правила коммуникации при падении пайплайна (не “кто виноват”, а “что сломалось и как фиксить”)
* онбординг новичка: чек-лист “как открыть PR”, “как чинить красный CI”, “как читать логи”

---

## 4) Напиши демонстрационные сценарии (demo_scenarios/)

### 4.1) broken_build.md

1. Ситуация: разработчик запушил flaky-тест (то проходит, то падает).
2. Вставь пример лога (кусок) с падением теста.
3. Покажи процесс:

   * нашли нестабильность
   * локализовали причину (рандом/тайминги/внешний ресурс)
   * исправили (фиксируем seed, убираем зависимость от времени, мок)
4. “Урок для команды”:

   * правило: flaky → блокер
   * добавили ретраи? (аккуратно: лучше фиксить, а не маскировать)
   * добавили метку quarantine/xfail? (если надо временно)

### 4.2) security_incident.md

1. Ситуация: в код попал API key (в коммите или в .env).
2. Лог security job: trufflehog нашёл secret.
3. Что происходит автоматически:

   * pipeline падает
   * уведомление в Slack/email (в описании)
4. Процесс исправления:

   * удалили секрет из репы (и переписали историю при необходимости)
   * ротировали ключ
   * добавили pre-commit/secret scanning локально
   * добавили allowlist только если ложноположительное

---

## 5) Реализуй CI конфиги (ci_config/)

Тут ключевое: **рабочие YAML-и** (GitHub Actions или GitLab CI). Ты обязан включить:

* кэш зависимостей
* условия запуска по веткам/PR
* уведомления (Slack/email) — хотя бы как интеграционный шаг/пример (можно через webhook secret)
* обработку ошибок/откатов (для CD можно сделать “deploy только из main + rollback если healthcheck fail”, даже если это учебно)

**Как обычно делают:**

* `main.yaml` — быстрые проверки: lint/typecheck + unit (+ optional integration)
* `security_scans.yaml` — secret scan + dependency scan (может запускаться на PR и на main, или по расписанию)

---

## 6) Подключи “защиту веток” в настройках репозитория

Это не кодом, но обязательно для сдачи:

1. Branch protection для `main`:

* Require PR before merge
* Require approvals (>=1)
* Require status checks (твои джобы)
* Restrict push to main

2. Добавь `CODEOWNERS` (если GitHub) — чтобы ревью реально требовалось.

---

## 7) Итоговый README.md (в каталоге ФамилияИО/)

Сделай краткий отчёт:

* что за стек/проект
* схема пайплайна (списком)
* какие правила enforced
* где лежат конфиги
* как прогнать локально (lint/test)
* ссылки на сценарии

---

## 8) Создай PR в upstream

1. Пушишь ветку `feature/СмеховПА` в свой fork.
2. Открываешь PR в `main` **основного репозитория**.
3. В описание PR пишешь:

* ФИО
* стек
* принципы инженерной культуры (коротким списком: “protected main, required reviews, green CI gate, fast feedback, security gates, blameless post-mortem”)

---

## Что в итоге должно быть “готово”

* В репе появился каталог `СмеховПА/` с 6 md + 2 yaml.
* CI реально стартует на PR и валит сборку при нарушениях.
* В main нельзя напрямую пушить/мержить без ревью и зелёного CI.
* Два сценария выглядят как реальные кейсы команды.

---

Если скажешь, **GitHub Actions или GitLab CI** у вас в `Practice105`, я дальше дам тебе **готовые шаблоны `main.yaml` + `security_scans.yaml` под твой стек** (Python или Node) и текст для всех md-файлов, чтобы просто вставить в репу.
